(this.webpackJsonpphonebook=this.webpackJsonpphonebook||[]).push([[0],{38:function(n,e,t){},39:function(n,e,t){"use strict";t.r(e);var o=t(0),r=t(1),c=t(15),a=t.n(c),i=t(5),u=t(3),s=function(n){var e=n.onChange;return Object(o.jsxs)("div",{children:["filter shown with \xa0",Object(o.jsx)("input",{id:"filter",onChange:e})]})},d=function(n){var e=n.description,t=n.onChange,r=n.value;return Object(o.jsxs)("div",{children:[e,": ",Object(o.jsx)("input",{onChange:t,value:r})]})},f=function(n){return console.log("Form persons comp:",n),Object(o.jsxs)("form",{onSubmit:n.onSubmit,className:"form",children:[Object(o.jsx)(d,{description:"name",onChange:n.onChangeName,value:n.name}),Object(o.jsx)(d,{description:"phone number",onChange:n.onChangeNumber,value:n.number}),Object(o.jsx)("div",{children:Object(o.jsx)("button",{type:"submit",children:"add"})})]})},l=function(n){var e=n.id,t=n.name,r=n.number,c=n.handleDeletePerson;return Object(o.jsxs)("div",{className:"person",children:[t," ",r," \xa0",Object(o.jsx)("button",{onClick:function(){return c(e)},children:" delete "})]})},b=function(n){var e=n.findPersons,t=n.persons,r=n.handleDeletePerson;console.log("persons comp",e,t);var c=[],a="";return e?e.length>0?c=e:a="No this person is not on the list":c=t,Object(o.jsxs)(o.Fragment,{children:[c.map((function(n){return Object(o.jsx)(l,{id:n.id,name:n.name,number:n.number,handleDeletePerson:r},n.id)})),a]})},h=t(4),j=t.n(h),m="/api/people",O=function(){return j.a.get(m).then((function(n){return n.data}))},p=function(n){return j.a.post(m,n).then((function(n){return n.data}))},v=function(n,e){return j.a.put("".concat(m,"/").concat(n),e).then((function(n){return n.data}))},g=function(n){return j.a.delete("".concat(m,"/").concat(n)).then((function(n){return n.data}))},x=(t(38),function(n){var e=n.classCss,t=n.notification;return Object(o.jsx)("div",{className:e,children:t})}),w=function(){var n=Object(r.useState)([]),e=Object(u.a)(n,2),t=e[0],c=e[1],a=Object(r.useState)(),d=Object(u.a)(a,2),l=d[0],h=d[1],j=Object(r.useState)(""),m=Object(u.a)(j,2),w=m[0],C=m[1],S=Object(r.useState)(""),k=Object(u.a)(S,2),N=k[0],y=k[1],D=Object(r.useState)(""),P=Object(u.a)(D,2),E=P[0],I=P[1],L=Object(r.useState)(""),B=Object(u.a)(L,2),F=B[0],J=B[1],A=function(){setTimeout((function(){I(null),J(null)}),5e3)};return Object(r.useEffect)((function(){O().then((function(n){c(n)}))}),[]),Object(o.jsxs)("div",{children:[Object(o.jsx)("h2",{children:"Phonebook"}),Object(o.jsx)(x,{classCss:F,notification:E}),Object(o.jsx)(s,{onChange:function(n){n.target.value?h(t.filter((function(e){return function(e){return-1!==e.toLowerCase().indexOf(n.target.value.toLowerCase())}(e.name)}))):h()}}),Object(o.jsx)("h2",{children:"Add a new"}),Object(o.jsx)(f,{onSubmit:function(n){n.preventDefault();var e={name:w,number:N,date:(new Date).toISOString()};N&&w?(console.log(w),t.find((function(n){return n.name===w}))?window.confirm("".concat(w," is already added to phonebook, replace the old number with a new one?"))&&v(t.filter((function(n){return n.name===w})).map((function(n){return n.id})),e).then((function(n){console.log(Object(i.a)(Object(i.a)({},e),{},{id:n.id}),"Looking for id"),c(t.map((function(t){return t.name!==w?t:Object(i.a)(Object(i.a)({},e),{},{id:n.id})}))),I("".concat(w," phone was updated to ").concat(N,".")),J("notification success"),A()})).catch((function(n){I(n.response.data.error),J("notification error"),A()})):t.find((function(n){return n.number===N}))?window.alert("the number ".concat(N," is already added to phonebook")):p(e).then((function(n){c(t.concat(n)),I("".concat(n.name," was added to the contact list")),J("notification success"),A()})).catch((function(n){I(n.response.data.error),J("notification error"),A()}))):window.alert("Either name or number cannot be blank"),C(""),y("")},onChangeName:function(n){console.log(n.target.value),C(n.target.value)},name:w,onChangeNumber:function(n){console.log(n.target.value),y(n.target.value)},number:N}),Object(o.jsx)("h2",{children:"Numbers"}),Object(o.jsx)(b,{findPersons:l,persons:t,handleDeletePerson:function(n){window.confirm("Do you want to delete ".concat(t.filter((function(e){return e.id===n})).map((function(n){return n.name}))))&&(g(n).then((function(e){c(t.filter((function(e){return e.id!==n}))),I("".concat(t.filter((function(e){return e.id===n})).map((function(n){return n.name}))," was removed from the server.")),J("notification success"),A()})).catch((function(e){c(t.filter((function(e){return e.id!==n}))),I("".concat(t.filter((function(e){return e.id===n})).map((function(n){return n.name}))," was already removed from the server.")),J("notification error"),A()})),document.getElementById("filter").value="",h())}})]})};a.a.render(Object(o.jsx)(w,{}),document.getElementById("root"))}},[[39,1,2]]]);
//# sourceMappingURL=main.20c912f8.chunk.js.map