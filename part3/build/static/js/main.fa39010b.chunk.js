(this.webpackJsonpphonebook=this.webpackJsonpphonebook||[]).push([[0],{38:function(e,n,t){},39:function(e,n,t){"use strict";t.r(n);var o=t(0),r=t(1),c=t(15),a=t.n(c),i=t(5),u=t(3),s=function(e){var n=e.onChange;return Object(o.jsxs)("div",{children:["filter shown with \xa0",Object(o.jsx)("input",{id:"filter",onChange:n})]})},d=function(e){var n=e.description,t=e.onChange,r=e.value;return Object(o.jsxs)("div",{children:[n,": ",Object(o.jsx)("input",{onChange:t,value:r})]})},l=function(e){return console.log("Form persons comp:",e),Object(o.jsxs)("form",{onSubmit:e.onSubmit,className:"form",children:[Object(o.jsx)(d,{description:"name",onChange:e.onChangeName,value:e.name}),Object(o.jsx)(d,{description:"phone number",onChange:e.onChangeNumber,value:e.number}),Object(o.jsx)("div",{children:Object(o.jsx)("button",{type:"submit",children:"add"})})]})},f=function(e){var n=e.id,t=e.name,r=e.number,c=e.handleDeletePerson;return Object(o.jsxs)("div",{className:"person",children:[t," ",r," \xa0",Object(o.jsx)("button",{onClick:function(){return c(n)},children:" delete "})]})},b=function(e){var n=e.findPersons,t=e.persons,r=e.handleDeletePerson;console.log("persons comp",n,t);var c=[],a="";return n?n.length>0?c=n:a="No this person is not on the list":c=t,Object(o.jsxs)(o.Fragment,{children:[c.map((function(e){return Object(o.jsx)(f,{id:e.id,name:e.name,number:e.number,handleDeletePerson:r},e.id)})),a]})},h=t(4),j=t.n(h),m="/api/people",p=function(){return j.a.get(m).then((function(e){return e.data}))},O=function(e){return j.a.post(m,e).then((function(e){return e.data}))},g=function(e,n){return j.a.put("".concat(m,"/").concat(e),n).then((function(e){return e.data}))},v=function(e){return j.a.delete("".concat(m,"/").concat(e)).then((function(e){return e.data}))},x=(t(38),function(e){var n=e.classCss,t=e.notification;return Object(o.jsx)("div",{className:n,children:t})}),w=function(){var e=Object(r.useState)([]),n=Object(u.a)(e,2),t=n[0],c=n[1],a=Object(r.useState)(),d=Object(u.a)(a,2),f=d[0],h=d[1],j=Object(r.useState)(""),m=Object(u.a)(j,2),w=m[0],C=m[1],S=Object(r.useState)(""),k=Object(u.a)(S,2),N=k[0],y=k[1],D=Object(r.useState)(""),P=Object(u.a)(D,2),E=P[0],I=P[1],L=Object(r.useState)(""),B=Object(u.a)(L,2),F=B[0],J=B[1],A=function(){setTimeout((function(){I(null),J(null)}),5e3)};return Object(r.useEffect)((function(){p().then((function(e){c(e)}))}),[]),Object(o.jsxs)("div",{children:[Object(o.jsx)("h2",{children:"Phonebook"}),Object(o.jsx)(x,{classCss:F,notification:E}),Object(o.jsx)(s,{onChange:function(e){e.target.value?h(t.filter((function(n){return function(n){return-1!==n.toLowerCase().indexOf(e.target.value.toLowerCase())}(n.name)}))):h()}}),Object(o.jsx)("h2",{children:"Add a new"}),Object(o.jsx)(l,{onSubmit:function(e){e.preventDefault();var n={name:w,number:N,date:(new Date).toISOString()};N&&w?(console.log(w),t.find((function(e){return e.name===w}))?window.confirm("".concat(w," is already added to phonebook, replace the old number with a new one?"))&&g(t.filter((function(e){return e.name===w})).map((function(e){return e.id})),n).then((function(e){console.log(Object(i.a)(Object(i.a)({},n),{},{id:e.id}),"Looking for id"),c(t.map((function(t){return t.name!==w?t:Object(i.a)(Object(i.a)({},n),{},{id:e.id})}))),I("".concat(w," phone was updated to ").concat(N,".")),J("notification success"),A()})).catch((function(e){console.log(e.response.data.error),I(e.response.data.error),J("notification error"),A()})):t.find((function(e){return e.number===N}))?window.alert("the number ".concat(N," is already added to phonebook")):O(n).then((function(e){c(t.concat(e)),I("".concat(e.name," was added to the contact list")),J("notification success"),A()})).catch((function(e){I(e.response.data.error),J("notification error"),A()}))):window.alert("Either name or number cannot be blank"),C(""),y("")},onChangeName:function(e){console.log(e.target.value),C(e.target.value)},name:w,onChangeNumber:function(e){console.log(e.target.value),y(e.target.value)},number:N}),Object(o.jsx)("h2",{children:"Numbers"}),Object(o.jsx)(b,{findPersons:f,persons:t,handleDeletePerson:function(e){window.confirm("Do you want to delete ".concat(t.filter((function(n){return n.id===e})).map((function(e){return e.name}))))&&(v(e).then((function(n){c(t.filter((function(n){return n.id!==e}))),I("".concat(t.filter((function(n){return n.id===e})).map((function(e){return e.name}))," was removed from the server.")),J("notification success"),A()})).catch((function(n){c(t.filter((function(n){return n.id!==e}))),I("".concat(t.filter((function(n){return n.id===e})).map((function(e){return e.name}))," was already removed from the server.")),J("notification error"),A()})),document.getElementById("filter").value="",h())}})]})};a.a.render(Object(o.jsx)(w,{}),document.getElementById("root"))}},[[39,1,2]]]);
//# sourceMappingURL=main.fa39010b.chunk.js.map